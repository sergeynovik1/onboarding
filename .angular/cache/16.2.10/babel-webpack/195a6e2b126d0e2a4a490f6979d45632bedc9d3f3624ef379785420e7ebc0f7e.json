{"ast":null,"code":"import { BehaviorSubject, Subscription } from 'rxjs';\nimport { CommonModule } from '@angular/common';\nimport { AdressInputComponent } from '../../../components/adress-input/adress-input.component';\nimport { DateInputComponent } from '../../../components/date-input/date-input.component';\nimport { ToogleComponent } from '../../../components/toogle/toogle.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { INPUT_OPTIONS } from '../../../consts/input-options/input-options';\nimport * as moment from 'moment';\nimport { ROUTE_STEPS } from '../../../consts/steps/route-steps';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/state-managment/state-manager.service\";\nimport * as i3 from \"../../../services/auth.service\";\nimport * as i4 from \"../../services/progress-bar.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nfunction RentReportingComponent_ng_container_9_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"h1\");\n    i0.ɵɵtext(3, \"Previous Address\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 16);\n    i0.ɵɵelement(5, \"div\", 17);\n    i0.ɵɵelementStart(6, \"div\", 18)(7, \"h1\");\n    i0.ɵɵtext(8, \"This may improve your score\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\");\n    i0.ɵɵtext(10, \" Enter any address from past 24 months where you were a lease holder that best reflects your ability to pay rent on time. \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"app-adress-input\", 19);\n    i0.ɵɵtext(12, \"Adress\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 12)(14, \"app-date-input\", 20);\n    i0.ɵɵtext(15, \"Move In Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"app-date-input\", 21);\n    i0.ɵɵtext(17, \"Move Out Date\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"inputOption\", ctx_r1.inputOptions[\"date\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"inputOption\", ctx_r1.inputOptions[\"date\"]);\n  }\n}\nfunction RentReportingComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0, 6);\n    i0.ɵɵelementStart(1, \"div\", 7)(2, \"div\", 8)(3, \"h1\");\n    i0.ɵɵtext(4, \"Current Adress\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 9);\n    i0.ɵɵelement(6, \"app-toogle\", 10);\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8, \"I\\u2019m not renting right now\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"app-adress-input\", 11);\n    i0.ɵɵtext(10, \"Adress\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 12)(12, \"app-date-input\", 13);\n    i0.ɵɵtext(13, \"Move In Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"div\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 14);\n    i0.ɵɵelement(16, \"app-toogle\", 10);\n    i0.ɵɵelementStart(17, \"span\");\n    i0.ɵɵtext(18, \"I\\u2019m not renting right now\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(19, RentReportingComponent_ng_container_9_div_19_Template, 18, 2, \"div\", 15);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.adressForm);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"inputOption\", ctx_r0.inputOptions[\"date\"]);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.adressForm.controls[\"previousAdress\"] && ctx_r0.adressForm.controls[\"previousMoveInDate\"] && ctx_r0.adressForm.controls[\"previousMoveOutDate\"]);\n  }\n}\nexport class RentReportingComponent {\n  constructor(fb, stateManagerService, authService, progressBarService, router) {\n    this.fb = fb;\n    this.stateManagerService = stateManagerService;\n    this.authService = authService;\n    this.progressBarService = progressBarService;\n    this.router = router;\n    this.inputOptions = INPUT_OPTIONS;\n    this.state = new BehaviorSubject(null);\n  }\n  ngOnInit() {\n    this.subscription = new Subscription();\n    this.adressForm = this.fb.group({\n      isRenting: [false],\n      currentAdress: [''],\n      currentMoveInDate: ['']\n    });\n    this.subscription.add(this.stateManagerService.getData().subscribe(res => {\n      this.state.next(res);\n      this.initializeForm();\n    }));\n    this.setProgressState();\n    this.toogleDisabledState(this.adressForm?.controls['currentAdress'], this.adressForm?.controls['isRenting'].value);\n    this.toogleDisabledState(this.adressForm?.controls['currentMoveInDate'], this.adressForm?.controls['isRenting'].value);\n    this.checkYearDifference(this.adressForm?.controls['currentMoveInDate'].value);\n    this.subscription.add(this.adressForm.controls['isRenting'].valueChanges.subscribe(res => {\n      this.toogleDisabledState(this.adressForm?.controls['currentAdress'], res);\n      this.toogleDisabledState(this.adressForm?.controls['currentMoveInDate'], res);\n      !res && this.adressForm?.markAsPristine();\n    }));\n    this.subscription.add(this.adressForm.controls['currentMoveInDate'].valueChanges.subscribe(res => {\n      this.checkYearDifference(res);\n    }));\n    this.subscription.add(this.adressForm.valueChanges.subscribe(res => {\n      this.setProgressState();\n    }));\n  }\n  onContinueClick() {\n    const currentAddress = {\n      ...this.adressForm?.controls['currentAdress'].value,\n      moveInDate: moment(this.adressForm?.controls['currentMoveInDate'].value).format('MM/DD/YYYY')\n    };\n    const payload = [currentAddress];\n    const previousAddress = this.adressForm?.controls['previousAdress'];\n    const previousMoveInDate = this.adressForm?.controls['previousMoveInDate'];\n    const previousMoveOutDate = this.adressForm?.controls['previousMoveOutDate'];\n    if (previousAddress && previousMoveInDate && previousMoveOutDate) {\n      const previousAddressData = {\n        ...previousAddress.value,\n        moveInDate: moment(previousMoveInDate.value).format('MM/DD/YYYY'),\n        moveOutDate: moment(previousMoveOutDate.value).format('MM/DD/YYYY')\n      };\n      payload.push(previousAddressData);\n    }\n    this.subscription?.add(this.authService.updateUserAdresses(payload).subscribe(res => {\n      this.router.navigate([ROUTE_STEPS[res.data.next].route]);\n    }));\n  }\n  checkYearDifference(value) {\n    const difference = this.getYearDifference(value);\n    difference != null && difference < 2 ? this.addPreviousControls() : this.removePreviousControls();\n  }\n  addPreviousControls() {\n    this.adressForm?.addControl('previousAdress', this.fb.control(''));\n    this.adressForm?.addControl('previousMoveInDate', this.fb.control(''));\n    this.adressForm?.addControl('previousMoveOutDate', this.fb.control(''));\n    this.adressForm?.markAsPristine();\n  }\n  removePreviousControls() {\n    this.adressForm?.removeControl('previousAdress');\n    this.adressForm?.removeControl('previousMoveInDate');\n    this.adressForm?.removeControl('previousMoveOutDate');\n  }\n  toogleDisabledState(control, value) {\n    value ? control?.disable({\n      emitEvent: false\n    }) : control?.enable({\n      emitEvent: false\n    });\n  }\n  getYearDifference(date) {\n    if (!date) {\n      return null;\n    }\n    var timeDiff = Math.abs(new Date().getTime() - new Date(date).getTime());\n    return Math.floor(timeDiff / 31536000000);\n  }\n  initializeForm() {\n    const currentAddress = this.state.value?.user?.addresses?.find(address => address.type.toLowerCase() == 'current');\n    const previousAddress = this.state.value?.user?.addresses?.find(address => address.type.toLowerCase() == 'previous');\n    if (currentAddress) {\n      this.adressForm?.patchValue({\n        currentAdress: currentAddress\n      });\n    }\n    if (previousAddress) {\n      this.adressForm?.patchValue({\n        previousAddress: previousAddress\n      });\n    }\n  }\n  setProgressState() {\n    this.progressBarService.setState({\n      display: true,\n      activeStep: 'rent-reporting',\n      primaryButton: {\n        disabled: !!this.adressForm?.invalid || !this.adressForm?.dirty,\n        text: 'Continue',\n        action: () => this.onContinueClick()\n      },\n      secondaryButton: {\n        disabled: false,\n        text: 'Back',\n        action: () => this.router.navigate(['/register/verification'])\n      }\n    });\n  }\n  ngOnDestroy() {\n    this.subscription?.unsubscribe();\n  }\n  static #_ = this.ɵfac = function RentReportingComponent_Factory(t) {\n    return new (t || RentReportingComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.StateManagerService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.ProgressBarService), i0.ɵɵdirectiveInject(i5.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RentReportingComponent,\n    selectors: [[\"ng-component\"]],\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 10,\n    vars: 1,\n    consts: [[1, \"wrapper\"], [1, \"content-wrapper\"], [1, \"content\"], [1, \"title\"], [1, \"subtitle\"], [3, \"formGroup\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"form\"], [1, \"form-title\"], [1, \"form-title_toogle\", \"default\"], [\"formControlName\", \"isRenting\"], [\"formControlName\", \"currentAdress\", \"placeholder\", \"Enter address\"], [1, \"date-wrapper\"], [\"formControlName\", \"currentMoveInDate\", 3, \"inputOption\"], [1, \"form-title_toogle\", \"media\"], [\"class\", \"form\", 4, \"ngIf\"], [1, \"prev-info\"], [1, \"icon\"], [1, \"text-wrapper\"], [\"formControlName\", \"previousAdress\", \"placeholder\", \"Enter address\"], [\"formControlName\", \"previousMoveInDate\", 3, \"inputOption\"], [\"formControlName\", \"previousMoveOutDate\", 3, \"inputOption\"]],\n    template: function RentReportingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\");\n        i0.ɵɵtext(5, \"Add rent reporting\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 4)(7, \"span\");\n        i0.ɵɵtext(8, \"For best results, we need your current home and past home addresses up to the past 24 months so that we can begin your rent reporting. Users receive faster and more aggressive results when they provide this information.\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(9, RentReportingComponent_ng_container_9_Template, 20, 3, \"ng-container\", 5);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.adressForm);\n      }\n    },\n    dependencies: [CommonModule, i6.NgIf, AdressInputComponent, DateInputComponent, ToogleComponent, ReactiveFormsModule, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\".btn[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-radius: 100px;\\n  border: 0;\\n  outline: 0;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  cursor: pointer;\\n  font-family: \\\"GeneralSansVariable\\\";\\n  font-size: 16px;\\n  font-style: normal;\\n  font-weight: 600;\\n  line-height: 20px;\\n  letter-spacing: 0.3px;\\n  color: #ffffff;\\n  transition: 200ms all;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%] {\\n  background-color: #1b585f;\\n}\\n.btn-primary[_ngcontent-%COMP%]:hover {\\n  background-color: #34736e;\\n}\\n.btn-primary[_ngcontent-%COMP%]:active {\\n  background-color: #0c494f;\\n}\\n.btn-primary[_ngcontent-%COMP%]:disabled {\\n  background-color: #ced1d1;\\n}\\n\\n.btn-secondary[_ngcontent-%COMP%] {\\n  border: 1px solid #1b585f;\\n  background-color: #ffffff;\\n  color: #1b585f;\\n}\\n.btn-secondary[_ngcontent-%COMP%]:hover {\\n  border: 1px solid #34736e;\\n  color: #34736e;\\n}\\n.btn-secondary[_ngcontent-%COMP%]:active {\\n  border: 1px solid #0c494f;\\n  color: #0c494f;\\n}\\n.btn-secondary[_ngcontent-%COMP%]:disabled {\\n  border: 1px solid #ced1d1;\\n  color: #ced1d1;\\n}\\n.btn-secondary.btn-sm[_ngcontent-%COMP%] {\\n  font-family: \\\"GeneralSansVariable\\\";\\n  color: #1b585f;\\n  font-size: 14px;\\n  font-style: normal;\\n  font-weight: 600;\\n  line-height: 16px;\\n  letter-spacing: 0.4px;\\n}\\n\\n.btn-lg[_ngcontent-%COMP%] {\\n  padding: 14px 32px;\\n}\\n\\n.btn-md[_ngcontent-%COMP%] {\\n  padding: 10px 28px;\\n}\\n\\n.btn-sm[_ngcontent-%COMP%] {\\n  padding: 8px 24px;\\n}\\n\\n.wrapper[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: grid;\\n  justify-content: center;\\n  padding: 105px 0;\\n  overflow: auto;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] {\\n  max-width: 600px;\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 32px;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  gap: 16px;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  font-family: \\\"GeneralSansVariable\\\";\\n  font-size: 32px;\\n  font-style: normal;\\n  font-weight: 600;\\n  line-height: 40px;\\n  color: #131414;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-family: \\\"GeneralSansVariable\\\";\\n  font-size: 16px;\\n  font-style: normal;\\n  font-weight: 400;\\n  line-height: 24px;\\n  letter-spacing: 0.2px;\\n  color: #131414;\\n  text-align: center;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 16px;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%] {\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form-title_toogle[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  gap: 16px;\\n  height: 20px;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form-title_toogle.media[_ngcontent-%COMP%] {\\n  display: none;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form-title_toogle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-family: \\\"GeneralSansVariable\\\";\\n  font-size: 16px;\\n  font-style: normal;\\n  font-weight: 400;\\n  line-height: 20px;\\n  letter-spacing: 0.2px;\\n  color: #000;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .prev-info[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid: auto/56px 1fr;\\n  gap: 24px;\\n  background-color: #f5f7f7;\\n  border-radius: 16px;\\n  padding: 16px 24px;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .prev-info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  background: url('icon-chart-square.svg');\\n  background-position: center;\\n  background-size: 100% 100%;\\n  background-repeat: no-repeat;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .prev-info[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 4px;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .prev-info[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  font-family: \\\"GeneralSansVariable\\\";\\n  font-size: 16px;\\n  font-style: normal;\\n  font-weight: 600;\\n  line-height: 24px;\\n  letter-spacing: 0.3px;\\n  color: #131414;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .prev-info[_ngcontent-%COMP%]   .text-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  color: #131414;\\n  font-family: \\\"GeneralSansVariable\\\";\\n  font-size: 14px;\\n  font-style: normal;\\n  font-weight: 400;\\n  line-height: 20px;\\n  letter-spacing: 0.2px;\\n}\\n.wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .date-wrapper[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid: auto/1fr 1fr;\\n  gap: 16px;\\n}\\n\\n@media screen and (max-width: 1024px) {\\n  .wrapper[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%] {\\n    padding: 0 24px;\\n    margin-top: 24px;\\n    padding-bottom: 24px;\\n  }\\n}\\n@media screen and (max-width: 540px) {\\n  .form-title_toogle.default[_ngcontent-%COMP%] {\\n    display: none !important;\\n  }\\n  .form-title_toogle.media[_ngcontent-%COMP%] {\\n    display: flex !important;\\n    justify-content: flex-start !important;\\n  }\\n  .date-wrapper[_ngcontent-%COMP%] {\\n    grid: auto/1fr !important;\\n  }\\n}\\n@media screen and (max-width: 425px) {\\n  .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n    font-size: 24px !important;\\n    line-height: 32px !important;\\n  }\\n  .form-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n    font-size: 20px;\\n    font-weight: 600;\\n    line-height: 24px;\\n  }\\n}\"],\n    changeDetection: 0\n  });\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}